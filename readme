# Ecommerce Backend â€“ Proyecto Final

Servidor backend desarrollado en Node.js como proyecto final del curso.  
Implementa un ecommerce con autenticaciÃ³n, autorizaciÃ³n por roles y una arquitectura profesional basada en buenas prÃ¡cticas.

---

## ğŸš€ TecnologÃ­as

- Node.js / Express
- MongoDB + Mongoose
- Passport + JWT
- bcrypt
- Nodemailer
- Express Handlebars
- dotenv

---

## ğŸ§± Arquitectura

El proyecto estÃ¡ organizado en capas:

- **Models**: esquemas de MongoDB
- **DAO**: acceso a datos
- **Repositories**: patrÃ³n Repository
- **Services**: lÃ³gica de negocio
- **Routes**: endpoints de la API
- **Middlewares**: autenticaciÃ³n y autorizaciÃ³n
- **DTOs**: transferencia segura de datos
- **Views**: Handlebars

---

## ğŸ” AutenticaciÃ³n y Roles

- Login con JWT
- Estrategia Passport `current`
- Endpoint `/api/sessions/current` devuelve un DTO sin datos sensibles
- AutorizaciÃ³n por roles:
  - **Admin**: crear, actualizar y eliminar productos
  - **User**: agregar productos al carrito y realizar compras

---

## ğŸ›’ Compras y Tickets

- Carrito asociado a cada usuario
- ValidaciÃ³n de stock al comprar
- GeneraciÃ³n de Ticket con cÃ³digo Ãºnico, fecha, monto y comprador

---

## ğŸ” RecuperaciÃ³n de ContraseÃ±a

- EnvÃ­o de email con enlace de recuperaciÃ³n
- Token con expiraciÃ³n de 1 hora
- No permite reutilizar contraseÃ±as anteriores

---

## ğŸ¨ Vistas

- Home
- Login
- Registro
- RecuperaciÃ³n de contraseÃ±a  
(Vistas implementadas con Handlebars)

---

## âš™ï¸ Variables de Entorno

```env
PORT=8080
MONGO_URI=
JWT_SECRET=secreto
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=587
MAIL_USER=usuario
MAIL_PASS=password
APP_URL=http://localhost:8080
