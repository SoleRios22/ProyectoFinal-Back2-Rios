# Ecommerce Backend ‚Äì Proyecto Final

Servidor backend desarrollado en Node.js como proyecto final del curso.  
Implementa un ecommerce con autenticaci√≥n, autorizaci√≥n por roles y una arquitectura profesional basada en buenas pr√°cticas.

---

## üöÄ Tecnolog√≠as

- Node.js / Express
- MongoDB + Mongoose
- Passport + JWT
- bcrypt
- Nodemailer
- Express Handlebars
- dotenv

---

## üß± Arquitectura

El proyecto est√° organizado en capas:

- **Models**: esquemas de MongoDB
- **DAO**: acceso a datos
- **Repositories**: patr√≥n Repository
- **Services**: l√≥gica de negocio
- **Routes**: endpoints de la API
- **Middlewares**: autenticaci√≥n y autorizaci√≥n
- **DTOs**: transferencia segura de datos
- **Views**: Handlebars

---

## üîê Autenticaci√≥n y Roles

- Login con JWT
- Estrategia Passport `current`
- Endpoint `/api/sessions/current` devuelve un DTO sin datos sensibles
- Autorizaci√≥n por roles:
  - **Admin**: crear, actualizar y eliminar productos
  - **User**: agregar productos al carrito y realizar compras

---

## üõí Compras y Tickets

- Carrito asociado a cada usuario
- Validaci√≥n de stock al comprar
- Generaci√≥n de Ticket con c√≥digo √∫nico, fecha, monto y comprador

---

## üîÅ Recuperaci√≥n de Contrase√±a

- Env√≠o de email con enlace de recuperaci√≥n
- Token con expiraci√≥n de 1 hora
- No permite reutilizar contrase√±as anteriores

---

## üé® Vistas

- Home
- Login
- Registro
- Recuperaci√≥n de contrase√±a  
(Vistas implementadas con Handlebars)

---

## ‚öôÔ∏è Variables de Entorno

```env
PORT=8080
MONGO_URI=mongodb+srv://soledadrios38_db_user:504D2oImIGnlN8ep@cluster01.bokkn4b.mongodb.net/EcommerceBack2?retryWrites=true&w=majority&appName=Cluster01
JWT_SECRET=secreto
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=587
MAIL_USER=usuario
MAIL_PASS=password
APP_URL=http://localhost:8080
